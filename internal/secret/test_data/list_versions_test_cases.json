{
  "test_cases": [
    {
      "name": "successful_list_versions",
      "description": "Successfully list all secret versions for an environment",
      "input": {
        "environment_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "expected": {
        "success": true,
        "error": null,
        "secret_versions": [
          {
            "id": "abc12345",
            "environment_id": "550e8400-e29b-41d4-a716-446655440000",
            "commit_message": "Latest version with API keys",
            "created_at": "2024-01-01T12:00:00Z",
            "secret_count": 3
          },
          {
            "id": "def67890",
            "environment_id": "550e8400-e29b-41d4-a716-446655440000",
            "commit_message": "Initial database setup",
            "created_at": "2024-01-01T10:00:00Z",
            "secret_count": 2
          }
        ]
      },
      "mock_setup": {
        "secret_repo": [
          {
            "method": "ListSecretVersions",
            "return": {
              "secret_versions": [
                {
                  "id": "abc12345",
                  "environment_id": "550e8400-e29b-41d4-a716-446655440000",
                  "commit_message": "Latest version with API keys",
                  "created_at": "2024-01-01T12:00:00Z"
                },
                {
                  "id": "def67890",
                  "environment_id": "550e8400-e29b-41d4-a716-446655440000",
                  "commit_message": "Initial database setup",
                  "created_at": "2024-01-01T10:00:00Z"
                }
              ],
              "error": null
            }
          }
        ]
      }
    },
    {
      "name": "empty_versions_list",
      "description": "Successfully return empty list when no versions exist",
      "input": {
        "environment_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "expected": {
        "success": true,
        "error": null,
        "secret_versions": []
      },
      "mock_setup": {
        "secret_repo": [
          {
            "method": "ListSecretVersions",
            "return": {
              "secret_versions": [],
              "error": null
            }
          }
        ]
      }
    },
    {
      "name": "invalid_environment_id_error",
      "description": "Fail to list versions with invalid environment ID",
      "input": {
        "environment_id": "invalid-uuid"
      },
      "expected": {
        "success": false,
        "error": "invalid UUID length"
      },
      "mock_setup": {}
    },
    {
      "name": "database_error",
      "description": "Fail when database error occurs during listing",
      "input": {
        "environment_id": "550e8400-e29b-41d4-a716-446655440000"
      },
      "expected": {
        "success": false,
        "error": "failed to list secret versions"
      },
      "mock_setup": {
        "secret_repo": [
          {
            "method": "ListSecretVersions",
            "return": {
              "error": "database connection failed"
            }
          }
        ]
      }
    }
  ]
} 