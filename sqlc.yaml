version: "1"

packages:
  - name: "userdb"
    path: "internal/auth/gen"
    queries: 
      - "internal/auth/users.sql"
    schema: "internal/db/migrations"
    engine: "postgresql"
    emit_json_tags: true
    emit_interface: true

  - name: "orgdb"
    path: "internal/org/gen"
    queries: 
      - "internal/org/queries.sql"
      - "internal/org/org_members.sql"
      - "internal/org/org_members_extended.sql"
    schema: "internal/db/migrations"
    engine: "postgresql"
    emit_json_tags: true
    emit_interface: true

  - name: "secretgroupdb"
    path: "internal/secretgroup/gen"
    queries: 
      - "internal/secretgroup/queries.sql"
      - "internal/secretgroup/secret_group_members.sql"
      - "internal/secretgroup/secret_group_members_extended.sql"
    schema: "internal/db/migrations"
    engine: "postgresql"
    emit_json_tags: true
    emit_interface: true

  - name: "environmentdb"
    path: "internal/environment/gen"
    queries: 
      - "internal/environment/queries.sql"
      - "internal/environment/environment_members.sql"
      - "internal/environment/environment_members_extended.sql"
    schema: "internal/db/migrations"
    engine: "postgresql"
    emit_json_tags: true
    emit_interface: true

  - name: "iam_db"
    path: "internal/iam/gen"
    queries:
    - "internal/iam/queries.sql"
    - "internal/iam/permissions_management.sql"
    - "internal/iam/enhanced_rbac_queries.sql"
    - "internal/iam/ownership_transfer_queries.sql"
    schema: "internal/db/migrations"
    engine: "postgresql"
    emit_json_tags: true
    emit_interface: true
  - name: "groupsdb"
    path: "internal/groups/gen"
    queries:
    - "internal/groups/queries.sql"
    schema: "internal/db/migrations"
    engine: "postgresql"
    emit_json_tags: true
    emit_interface: true
  - name: "secretdb"
    path: "internal/secret/gen"
    queries:
      - "internal/secret/queries.sql"
    schema: "internal/db/migrations"
    engine: "postgresql"
    emit_json_tags: true
    emit_interface: true
  - name: "providerdb"
    path: "internal/provider/gen"
    queries:
      - "internal/provider/queries.sql"
    schema: "internal/db/migrations"
    engine: "postgresql"
    emit_json_tags: true
    emit_interface: true